var $CityDropDown={_dropDownID:null,_textBoxID:null,_containerID:null,_ulindex:null,_lilastitem:null,_licounter:null,_liLoopcount:null,_resource:null,ReplaceCustomDD:function(){$(".CustomizableDD").each(function(){try{var a=$(this),b=a.attr("id")+"_CTXT";$CityDropDown._ulindex=1;if($("#"+b).length>0)return;var e="",f="",i=a.find("option:selected");if(i.length>0){e=a.find("option:selected")[0].innerHTML;f=a.val()}var h='<span id = "'+b+'action" class="red-arrow-btn" ></span> <input id = "'+b+'" name ="'+b+'" SelectedText="" SelectedValue="" SelectedText="'+e+'" SelectedValue="'+f+'" value="'+e+'" class="select_CTXT" MenuSelection="false" autocomplete="off"  style="width: 200px; height: 20px; border: 1px solid #999;"/>';a.after(h);var c=a.parent().find("#"+b);c.bind("focus",{id:b},$CityDropDown.LoadCustomDDOptions);c.bind("blur",{textID:b,ddID:a.attr("id")},$CityDropDown.ResetDropdownValue);a.bind("focus",function(){c.focus()});var g=a.parent().find("#"+b+"action");g.bind("click",{id:b},$CityDropDown.ShowHideTriggerHandler);a.bind("valuechange",{textID:b,ddID:$(this).attr("id")},$CityDropDown.ResetTextBoxValue);a.css("width")!=null&&c.css("width",a.css("width"));a.css("height")!=null&&c.css("height",a.css("height"));a.css("display","none");if(a.attr("AssociatedTextBox")!=null){var d=$("#"+a.attr("AssociatedTextBox"));if(d!=null)d.length>0&&d.css("display","none")}}catch(j){}})},HidePreviousContainer:function(){try{if($CityDropDown._containerID!=null){var b=$("#"+$CityDropDown._containerID),a=$("#"+$CityDropDown._textBoxID),d=$("#"+$CityDropDown._dropDownID);if(a.length>0&&a.val()!=""){var c=d.find("option:selected");(c.length==0||c[0].innerHTML!=a.val()||a.attr("SelectedValue")=="")&&b.find("a").each(function(){$(this).attr("text")==a.val()&&$(this).trigger("click")})}$CityDropDown.ShowHideContainer(b,"hide",0)}}catch(e){alert(e)}},ShowHideTriggerHandler:function(b){var c=$("#"+b.data.id),a=$("#"+b.data.id.replace("_CTXT","")+"_CTNR");if(a!=null)if(a.length>0&&a.css("display")=="block")$CityDropDown.ShowHideContainer(a,"hide",0);else c.focus()},ShuffleListItems:function(){var h=4,l=$("#"+$CityDropDown._containerID),e=l.find("div.dropdownDiv"),n="";if(e.length>0)for(var d=0;d<e.length;d++){var g=[],c=[],b=0,a=0;$(e[d]).find("li").each(function(){var d=$(this);g[b]=d;b++;if(d.css("display")!="none"){c[a]=d;a++}});var m=Math.ceil(c.length/h);b=0;a=0;for(var k=$("<div></div>"),f=0;f<h;f++){var j=$("<ul></ul>");while(b<g.length&&(c.length>0&&a<(f+1)*m||c.length==0||a==c.length)){var i=$(g[b]);j.append(i);b++;if(i.css("display")!="none")a++}k.append(j)}$(e[d]).html(k.html())}},LoadCustomDDOptions:function(w){try{var j=$("#"+w.data.id.replace("_CTXT","")+"_CTNR");if(j!=null)if(j.length>0)if(j.css("display")=="block")return;$CityDropDown.HidePreviousContainer();var f="",r=0,n=1,b=[],d=[],o=[],A=false;$CityDropDown._dropDownID=w.data.id.replace("_CTXT","");$CityDropDown._textBoxID=w.data.id;$CityDropDown._containerID=$CityDropDown._dropDownID+"_CTNR";var e=$("#"+$CityDropDown._dropDownID);if(e.attr("itemStartIndex")!=null)n=parseInt(e.attr("itemStartIndex"));document.getElementById($CityDropDown._dropDownID).selectedIndex==0&&$("#"+$CityDropDown._textBoxID).attr("value","");if(e!=null)e.length>0&&e.find("option").each(function(){if(r>=n){b[r-n]=$(this).text();d[r-n]=$(this).val()}r+=1});if(b.length>0&&d.length>0){for(var q=null,a=0;a<b.length;a++)for(var h=a+1;h<b.length;h++)if(b[a]>b[h]){q=b[a];b[a]=b[h];b[h]=q;q=d[a];d[a]=d[h];d[h]=q}if(e.attr("topItems")!=null){o=e.attr("topItems").split(",");if(o.length>0)A=true}f='<div width="100%" border="0" align="center" class="search_options_menucontent">';if(A){f+="";for(var g=0,c="",a=0;a<b.length;a++)for(var h=0;h<o.length;h++)if(d[a]==o[h]){if(g==0)c+="<ul>";else if(g==3){g=0;c+=""}c+='<a href="#" onclick="javascript:$CityDropDown.SetSelectedValue(this);return false;" text ="'+b[a]+'" value ="'+d[a]+'"> '+b[a]+"</a>"}c+=g==0?"":g==1?"<li>&nbsp;</li><li>&nbsp;</li>":g==2?"<li>&nbsp;</li>":"";if(c!="")f+="<li><h3>Top Cities</h3></li>"+c}var k=[],u=[];if(e.attr("groupcontrolid")!=null){var t=$("#"+e.attr("groupcontrolid"));if(t!=null)if(t.length>0)for(var B=t.attr("value").split("##"),a=0;a<B.length;a++){var z=B[a].split("@@");k[k.length]=z[0];var x=z[1].split("||");u[a]=[];for(var h=0;h<x.length;h++)for(var i=0;i<d.length;i++)if(d[i]==x[h]){u[a][h]=x[h];break}}}var s=5,y=0;if(k.length>0)for(var i=0;i<k.length;i++){for(var g=0,c="",F="",G=false,a=0;a<b.length;a++)if($CityDropDown.ItemExistsInArray(d[a],u[i])){var p="",m="",l="";if($CityDropDown.IsInterlineCity(d[a])){p="interline";m="tooltip";l="Interline with Tigerair"}if(g==0)c+="";else if(g==s){g=0;c+=""}if(e.val()==d[a]){y=1;c+='<li class="city_selected '+p+'"><a  href="#"  class="'+m+'" tooltip="'+l+'"onclick="javascript:$CityDropDown.SetSelectedValue(this);return false;" text ="'+b[a]+'" value ="'+d[a]+'"> '+b[a]+"</a></li>"}else if(y==0&&e.val()==""){c+='<li class="city_selected '+p+'"><a href="#" class="'+m+'" tooltip="'+l+'" onclick="javascript:$CityDropDown.SetSelectedValue(this);return false;" text ="'+b[a]+'" value ="'+d[a]+'"> '+b[a]+"</a></li>";y=1}else c+='<li class="'+p+'"><a href="#"  class="'+m+'" tooltip="'+l+'" onclick="javascript:$CityDropDown.SetSelectedValue(this);return false;" text ="'+b[a]+'" value ="'+d[a]+'"> '+b[a]+"</a></li>";g++}if(c!=""){c+="";f+='<div id ="dropdownGroup'+(i+1)+'"><h3 class=title'+(i+1)+">"+k[i]+'</h3><div class="dropdownDiv" ><ul id=ul'+(i+1)+">";f+=c+"</ul></div></div>"}}else{for(var F="",G=false,a=0;a<b.length;a++){if(g==0)f+="";else if(g==s){g=0;f+=""}if(e.val()==d[a])c+='<li><a class="city_selected" href="#"  onclick="javascript:$CityDropDown.SetSelectedValue(this);return false;" text ="'+b[a]+'" value ="'+d[a]+'"> '+b[a]+"</a></li>";else c+='<li><a href="#" onclick="javascript:$CityDropDown.SetSelectedValue(this);return false;" text ="'+b[a]+'" value ="'+d[a]+'"> '+b[a]+"</a></li>";g++}for(var a=g;a<s;a++)c+="<li>&nbsp;</li>";if(c!=""){c+="";f+='<div id ="dropdownGroup'+1+'">';if(e.attr("groupname")!=undefined)f+="<h3 class=title"+1+">"+e.attr("groupname")+"</h3>";f+='<div class="dropdownDiv" ><ul id=ul'+1+">";f+=c+"</ul></div></div>"}c+=""}f+="</div>"}var C="";if(e.attr("title")!=null)C=e.attr("title");f="            <div id=gls"+$CityDropDown._containerID+'><a class="close-btn close" id="closebtn" href="#">X</a><table width="98%" border="0" cellpadding="0" cellspacing="0" id="citydropdown">                 <tr>                     <td class="left">                     </td>                     <td class="topbg">                     </td>                     <td class="right">                     </td>                 </tr>                 <tr>                     <td class="leftbg">                         &nbsp;                     </td>                     <td class="mapbg">                         <div class="btnrow">                             <a href="#" class="close" ></a>                         </div><div class="heading">'+C+"</div>"+f+'                    </td>                     <td class="rightbg">                         &nbsp;                     </td>                 </tr>                 <tr>                     <td class="btmleft">                     </td>                     <td class="btmbg">                         &nbsp;                     </td>                     <td class="btmright">                     </td>                 </tr>             </table></div>';var j=$("#"+$CityDropDown._containerID);if(j!=null)if(j.length>0){j.empty();j.append(f);$CityDropDown.ShowHideContainer(j,"show",20);$("#"+$CityDropDown._containerID+" .close").bind("click",{id:$CityDropDown._textBoxID},$CityDropDown.HidePreviousContainer);return}var v=$("#"+$CityDropDown._textBoxID),D;try{D=parseInt(v.css("height").replace("px","")/2)+"px"}catch(H){D=v.css("height")}var E=' <div class="search_options_menucontentbg" id="'+$CityDropDown._containerID+'" style="z-index:999999;display:none;" > '+f+" </div>";v.after(E);$("#"+$CityDropDown._containerID+" .close").bind("click",{id:$CityDropDown._textBoxID},$CityDropDown.HidePreviousContainer);var j=$("#"+$CityDropDown._containerID);$CityDropDown.ShowHideContainer(j,"show",200)}catch(H){alert(H)}},ResetTextBoxValue:function(c){try{var b=c.data.textID,a=c.data.ddID;setTimeout(function(){if(b!=null&&a!=null){var e=$("#"+b),d=$("#"+a),c=d.find("option:selected");c.length>0&&e.attr("value",c[0].innerHTML)}},100)}catch(d){alert(d)}},IsInterlineCity:function(b){try{var a=0;$.each(InterCities,function(d,c){$.each(c,function(d,c){if(c==b)a=1})});return a==1?true:false}catch(c){alert(c)}},ResetDropdownValue:function(e){try{var b=e.data.textID,a=e.data.ddID;if(b!=null&&a!=null){var f=$("#"+b),c=$("#"+a),d=c.find("option:selected");d.length>0&&d[0].innerHTML!=f.attr("value")&&c.val("").trigger("change")}}catch(g){alert(g)}},ItemExistsInArray:function(c,b){try{for(var a=0;a<b.length;a++)if(c==b[a])return true;return false}catch(d){alert(d)}},HideAssociatedContainer:function(c){try{var a=c.data.id.replace("_CTXT","")+"_CTNR",b=$("#"+a);setTimeout(function(){var d=$("#"+$CityDropDown._dropDownID),a=$("#"+$CityDropDown._textBoxID);if(a!=null){document.getElementById($CityDropDown._dropDownID).selectedIndex==0&&a.attr("value",d.attr("title"));var c=null,e=null;d.find("option").each(function(){if(c==null)if($(this).attr("text").toUpperCase().trim()==a.attr("value").toUpperCase().trim()){$(this).attr("selected","selected");c=$(this).attr("value");e=$(this).attr("text")}});if(c!=null){if(a.attr("SelectedValue")!=c){d.trigger("change");d.trigger("keypress")}a.attr("value",e);a.attr("SelectedText",e);a.attr("SelectedValue",c)}else{a.focus();return}}$CityDropDown.ShowHideContainer(b,"hide",0)},200)}catch(d){alert(d)}},SetSelectedValue:function(b){var e=$("#"+$CityDropDown._dropDownID),a=$("#"+$CityDropDown._textBoxID),i=$CityDropDown._dropDownID+"_CTNR",k=$("#"+i);a.attr("value",b.getAttribute("text"));a.attr("SelectedText",b.getAttribute("text"));a.attr("SelectedValue",b.getAttribute("value"));a.attr("MenuSelection","true");e.attr("value",b.getAttribute("value"));e.trigger("change");var n=0;$CityDropDown.ShowHideContainer(k,"hide",0);var j=$("input[id$=originStation1_CTXT]").val(),m=$("input[id$=destinationStation1_CTXT]").val(),g=b.getAttribute("text"),c=0;$("#"+$CityDropDown._containerID+" #dropdownGroup2 ul li").each(function(){if($.trim(g)==$.trim($(this).text()))c=1});if(j==g)if(c==1)OriginCityflag=1;else OriginCityflag=0;if(c==1||OriginCityflag==1){$("div[id$=IndArm]").css({display:"block",opacity:"0.5","pointer-events":"none"});$("input[id$=chk_IndArm]").attr("checked",false);$("div[id$=SeniorCitizenDiv]").css({display:"block",opacity:"0.5","pointer-events":"none"});$("input[id$=chk_SeniorCitizenDiscount]").attr("checked",false);$("div[id$=StudentDiv]").css({display:"block",opacity:"0.5","pointer-events":"none"});$("input[id$=chk_StudentDiscount]").attr("checked",false);$("input[id$=chk_StudentDiscount]").attr("disabled","disabled");$("input[id$=chk_SeniorCitizenDiscount]").attr("disabled","disabled");$("input[id$=chk_IndArm]").attr("disabled","disabled");ShowFields()}else{$("div[id$=IndArm]").css({display:"block",opacity:"1","pointer-events":"inherit"});$("div[id$=SeniorCitizenDiv]").css({display:"block",opacity:"1","pointer-events":"inherit"});$("div[id$=StudentDiv]").css({display:"block",opacity:"1","pointer-events":"inherit"});$("input[id$=chk_StudentDiscount]").removeAttr("disabled");$("input[id$=chk_SeniorCitizenDiscount]").removeAttr("disabled");$("input[id$=chk_IndArm]").removeAttr("disabled")}var l=$(":radio:checked").val();if(l=="TripPlanner"){var f=$("#"+$CityDropDown._dropDownID).attr("id"),d=f.substr(f.length-1),h=e.attr("id");if(h.indexOf("destinationStation")>0&&d>1)$("#ctl00_mainContent_txt_Fromdate"+(parseInt(d)+1)).next(".ui-datepicker-trigger").trigger("click");else h.indexOf("destinationStation")>0&&d==1&&$("#ctl00_mainContent_txt_Fromdate").next(".ui-datepicker-trigger").trigger("click")}a.trigger("blur")},ShowHideContainer:function(a,f,d){if(f=="show"){$CityDropDown.ShuffleListItems();a.fadeIn(500,function(){var c=$("#"+$CityDropDown._dropDownID),b=$("#"+$CityDropDown._textBoxID);document.getElementById($CityDropDown._dropDownID).selectedIndex==0&&b.attr("value","");a.bind("click",function(){return false});$("html").bind("click",function(b){!(b.pageX>=a.offset().left&&b.pageX<=a.offset().left+a.width()&&b.pageY>=a.offset().top-d&&b.pageY<=a.offset().top+a.height())&&$CityDropDown.ShowHideContainer(a,"hide",0)})})}else{var e=$("#"+$CityDropDown._dropDownID),c=$("#"+$CityDropDown._textBoxID);if(document.getElementById($CityDropDown._dropDownID).selectedIndex==0){var b=e.find("option:selected");if(b.length>0)c.attr("value",b[0].innerHTML);else c.attr("value","")}a.fadeOut(500,function(){a.unbind("click");$("html").unbind("click")})}}};String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")};function clearFormValues(){$("select[id$=ddl_originStation1]").val("");$("select[id$=ddl_destinationStation1]").val("");$("input[id$=txt_Promocode]").val("");$("input[id$=chk_IndArm]").attr("checked",false);$("input[id$=StudentDiscount]").attr("checked",false);$("select[id$=ddl_Adult]").val("1");$("select[id$=ddl_Child]").val("0");$("select[id$=ddl_Infant]").val("0");$("select[id$=ddl_originStation2]").val("");$("select[id$=ddl_destinationStation2]").val("");$("select[id$=ddl_originStation3]").val("");$("select[id$=ddl_destinationStation3]").val("");$("select[id$=ddl_originStation4]").val("");$("select[id$=ddl_destinationStation4]").val("");$("select[id$=ddl_originStation5]").val("");$("select[id$=ddl_destinationStation5]").val("")}$(document).ready(function(){try{clearFormValues();setTimeout(function(){$CityDropDown.PageLoad=false},2e3);$CityDropDown.PageLoad=true;$CityDropDown.ReplaceCustomDD();var b=$("input[id$=hdf_Jsontext]").val();CityInfo=$.parseJSON(b);$("input[id$=hdf_Jsontext]").val();var a=$("input[id$=hdf_InterlineCity]").val();InterCities=$.parseJSON(a);$("input[id$=hdf_InterlineCity]").val();$("select[id$=ddl_originStation1]").change(function(){$(this).val()!=""&&LoadDestinations();return false});$("select[id$=ddl_originStation1_MST]").change(function(){$(this).val()!=""&&LoadMSTDestinations();return false})}catch(c){}});function LoadDestinations(){var c=$("input[id$=originStation1_CTXT]").val()==="Departure City"?$("#ctl00_mainContent_ddl_originStation1 option:selected").text():$("input[id$=originStation1_CTXT]").val();$("input[id$=destinationStation1_CTXT]").val("Arrival City");var b="";b+="<option value=''>Arrival City</option>";var a=0;$.each(CityInfo,function(e,d){$.each(d,function(e,d){if(e=="CityNameCode"&&d==c)a=1;if(e=="Destinations"&&a==1){a=0;$.each(d,function(a,c){b+="<option value='"+c+"'>"+a+"</option>"});return false}})});$("select[id$=destinationStation1]").empty();$("select[id$=destinationStation1]").html(b);CreateSkySalesSession()}function LoadMSTDestinations(){var c=$("input[id$=originStation1_MST_CTXT]").val();$("input[id$=destinationStation1_MST_CTXT]").val("Arrival City");var b="";b+="<option value=''>Arrival City</option>";var a=0;$.each(CityInfo,function(e,d){$.each(d,function(e,d){if(e=="CityNameCode"&&d==c)a=1;if(e=="Destinations"&&a==1){a=0;$.each(d,function(a,c){b+="<option value='"+c+"'>"+a+"</option>"});return false}})});$("select[id$=destinationStation1_MST]").empty();$("select[id$=destinationStation1_MST]").html(b)}var CityInfo={CityNameCode:null,Destinations:[{CityName:"",CityCode:""}]},InterCities={CityCode:null},OriginCityflag=0;jQuery.expr[":"].Contains=function(a,c,b){return(a.textContent||a.innerText||"").toUpperCase().indexOf(b[3].toUpperCase())>=0};$(".select_CTXT").live("click",function(){$(this).select()});function listFilter(a){$(".select_CTXT").live("change",function(m){try{var b=$(this).val(),l=$("#"+$CityDropDown._textBoxID);l.attr("MenuSelection","false").attr("SelectedText","").attr("SelectedValue","");var k=$("#"+$CityDropDown._dropDownID);k.attr("selectedIndex",0);var h="#"+$CityDropDown._containerID,c=$(h+" #dropdownGroup1"),d=$(h+" #dropdownGroup2");if(b){var n=0;$(a).find("a:not(:Contains("+b+"))").closest("li").hide().removeClass("livecl");if(b.indexOf("j")>=0||b.indexOf("jl")>=0||b.indexOf("ja")>=0||b.indexOf("jal")>=0)if(!(b.indexOf("jai")>=0||b.indexOf("jab")>=0||b.indexOf("ajm")>=0)){var i="adampur";$(a).find("a:Contains("+i+")").closest("li").show().addClass("livecl")}if(b.indexOf("aj")>=0||b.indexOf("ajm")>=0||b.indexOf("pus")>=0||b.indexOf("push")>=0){var j="kishangarh";$(a).find("a:Contains("+j+")").closest("li").show().addClass("livecl")}if(b.indexOf("g")>=0||b.indexOf("ga")>=0||b.indexOf("gan")>=0){var g="pakyong";$(a).find("a:Contains("+g+")").closest("li").show().addClass("livecl")}if(b.indexOf("li")>=0||b.indexOf("lil")>=0||b.indexOf("la")>=0||b.indexOf("lak")>=0){var g="Lakhimpur";$(a).find("a:Contains("+g+")").closest("li").show().addClass("livecl")}c.find("li").removeClass("city_selected");d.find("li").removeClass("city_selected");$(a).find("a:Contains("+b+")").closest("li").show().addClass("livecl");var f="showText",e="showText";if(c.find("li.livecl").length<1){c.hide();f="noText"}else{c.show();f="showText";c.find("li").removeClass("city_selected");d.find("li").removeClass("city_selected");c.find("li.livecl").first().addClass("city_selected");m.preventDefault()}if(d.find("li.livecl").length<1){d.hide();e="noText"}else{d.show();e="showText";if(c.find("li.livecl").length<1){c.find("li").removeClass("city_selected");d.find("li").removeClass("city_selected");d.find("li.livecl").first().addClass("city_selected")}}if(f=="noText"&&e=="noText"){$(".mapbg .heading").html("No city matches your search.").show();c.hide();d.hide()}else $(".mapbg .heading").html("")}else{c.show();d.show();$(a).find("li").show().addClass("livecl")}$CityDropDown.ShuffleListItems()}catch(m){}return false}).keyup(function(a){a.keyCode!=39&&a.keyCode!=37&&a.keyCode!=40&&a.keyCode!=38&&$(this).change();$(this).val()==""&&$(".mapbg .heading").html("")});$(".select_CTXT").live("keyup",function(c){if(c.keyCode==39||c.keyCode==37||c.keyCode==40||c.keyCode==38){var d=$(this).val(),f=$("#"+$CityDropDown._textBoxID);f.attr("MenuSelection","false").attr("SelectedText","").attr("SelectedValue","");var e=$("#"+$CityDropDown._dropDownID);e.attr("selectedIndex",0);$(a).find("a:not(:Contains("+d+"))").parent().stop();$(a).find("a:Contains("+d+")").parent().slideDown().addClass("livecl");var g=FindOrgorDes(),h=$(g+" ul:eq("+$CityDropDown._ulindex+") li:eq(0)");c.stopPropagation();return false}if(c.keyCode===13)triggerSelectedCityLink();else b()});var b=function(){var a=$("div.search_options_menucontentbg:visible").find("li>a:visible");if(a.length==1){var b=$(".select_CTXT").val();if(b=="hk")console.log("I am here ");else a.click()}};$(".select_CTXT").live("keydown",function(b){var a=FindOrgorDes();$CityDropDown._licounter=0;$CityDropDown._liLoopcount=0;if(b.keyCode==37||b.keyCode==38||b.keyCode==39||b.keyCode==40){a.removeClass("city_selected");switch(b.keyCode){case 37:a=GetNextItem(a,"left");a.addClass("city_selected");break;case 38:var d=a;a=GetNextItem(a,"up");a.addClass("city_selected");break;case 39:a=GetNextItem(a,"right");a.addClass("city_selected");break;case 40:a=GetNextItem(a,"down");a.addClass("city_selected")}var c=FindOrgorDesAnch();setdropdown(c);return false}})}$(function(){listFilter(".search_options_menucontent")});function setdropdown(a){var c=$("#"+$CityDropDown._textBoxID);c.attr("value",a.attr("text")).attr("SelectedText",a.attr("text")).attr("SelectedValue",a.attr("value")).attr("MenuSelection","true").select();var b=$("#"+$CityDropDown._dropDownID);b.attr("value",a.attr("value"))}function switchli(c){var b="#"+$CityDropDown._containerID;$CityDropDown._liLoopcount++;if(c=="next"||c=="down"){if($CityDropDown._ulindex==1)var a=$(b+" #dropdownGroup1 ul").children("li").filter(function(){return $(this).css("display")!=="none"}).length;else var a=$(b+" #dropdownGroup2 ul").children("li").filter(function(){return $(this).css("display")!=="none"}).length;var d=$(b+" ul:eq("+$CityDropDown._ulindex+") li:eq(0)")}else if(c=="prev"||c=="up"){if($CityDropDown._ulindex==1)var a=$(b+" #dropdownGroup2 ul").children("li").filter(function(){return $(this).css("display")!=="none"}).length;else var a=$(b+" #dropdownGroup1 ul").children("li").filter(function(){return $(this).css("display")!=="none"}).length;$CityDropDown._lilastitem=$(b+" ul:eq("+$CityDropDown._ulindex+") li").length;var d=$(b+" ul:eq("+$CityDropDown._ulindex+") li:eq("+($CityDropDown._lilastitem-1)+")")}a=a%4;if(a==1){if($CityDropDown._licounter==0)$CityDropDown._licounter=$CityDropDown._licounter+(4-a);else if($CityDropDown._licounter==1||$CityDropDown._licounter==2||$CityDropDown._licounter==3)$CityDropDown._licounter=$CityDropDown._licounter-a}else if(a==2){if($CityDropDown._licounter==0||$CityDropDown._licounter==1)$CityDropDown._licounter=$CityDropDown._licounter+(4-a);else if($CityDropDown._licounter==2||$CityDropDown._licounter==3)$CityDropDown._licounter=$CityDropDown._licounter-a}else if(a==3)if($CityDropDown._licounter==0||$CityDropDown._licounter==1||$CityDropDown._licounter==2)$CityDropDown._licounter=$CityDropDown._licounter+(4-a);else if($CityDropDown._licounter==3)$CityDropDown._licounter=$CityDropDown._licounter-a;if($CityDropDown._ulindex==1)$CityDropDown._ulindex=0;else $CityDropDown._ulindex=1;return d}function Findactiveli(a,b){if(!a.length>0)a=switchli(b);if(a.css("display")=="none"){if(b=="next")a=a.next();else a=a.prev();a=Findactiveli(a,b);return a}else return a}function FindUpDownactiveli(c,b){if(b=="down")var a=Findactiveli(c,"next");else var a=Findactiveli(c,"prev");$CityDropDown._licounter++;if($CityDropDown._liLoopcount>=3)$CityDropDown._licounter=4;if($CityDropDown._licounter==4)return a;else{if(b=="down")a=FindUpDownactiveli(a.next(),b);else a=FindUpDownactiveli(a.prev(),b);return $CityDropDown._liLoopcount>=3?c:a}}function GetNextItem(a,b){if(b=="up"){var d=a.prev();while(d.length>0&&d.css("display")=="none")d=d.prev();if(d.length>0)a=d;else a=GetNextContainerItem(a,a.closest("ul"),b,0)}else if(b=="down"){var c=a.next();while(c.length>0&&c.css("display")=="none")c=c.next();if(c.length>0)a=c;else a=GetNextContainerItem(a,a.closest("ul"),b,0)}else if(b=="left")a=GetNextContainerItem(a,a.closest("ul"),b,GetListItemIndex(a));else a=GetNextContainerItem(a,a.closest("ul"),b,GetListItemIndex(a));return a}function GetNextContainerItem(c,a,f,b){try{var l,m;switch(f){case"up":var j=0,g=a.index(),i=a.closest("div").parent("div").attr("id"),h=GetNextGroup(i),e=$("#"+$CityDropDown._containerID+" #"+h);j=e.find("ul:eq(0) li").length;if(h=="dropdownGroup2"||i==h){var k=e.find("ul").length;if(g==0)g=k-1;else g--}a=e.find("ul:eq("+g.toString()+")");b=j-1;if(a!=null&&a!=undefined&&a.length>0){var d=GetListItem(a,b);while(d==undefined&&b>0){b--;var d=GetListItem(a,b)}if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}break;case"down":var g=a.index(),i=a.closest("div").parent("div").attr("id"),h=GetNextGroup(i),e=$("#"+$CityDropDown._containerID+" #"+h);if(h=="dropdownGroup1"||i==h){var k=e.find("ul").length;if(g+1==k)g=0;else g++}a=e.find("ul:eq("+g.toString()+")");if(a!=null&&a!=undefined&&a.length>0){var d=GetListItem(a,b);if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}break;case"left":if(a.prev().length>0){a=a.prev();var d=GetListItem(a,b);if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}else if(b>0){var e=a.closest("div"),k=e.find("ul").length;a=e.find("ul:eq("+(k-1).toString()+")");b--;var d=GetListItem(a,b);if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}else{var i=a.closest("div").parent("div").attr("id"),h=GetNextGroup(i),e=$("#"+$CityDropDown._containerID+" #"+h),k=e.find("ul").length;a=e.find("ul:eq("+(k-1).toString()+")");var j=e.find("ul:eq(0) li").length;b=j-1;if(a!=null&&a!=undefined&&a.length>0){var d=GetListItem(a,b);if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}}break;default:if(a.next().length>0){a=a.next();var d=GetListItem(a,b);if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}else{var e=a.closest("div"),j=e.find("ul:eq(0) li").length;if(b+1<j){var k=e.find("ul").length;a=e.find("ul:eq(0)");b++;var d=GetListItem(a,b);if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}else{var i=a.closest("div").parent("div").attr("id"),h=GetNextGroup(i),e=$("#"+$CityDropDown._containerID+" #"+h),n=e.find("ul").length;a=e.find("ul:eq(0)");b=0;if(a!=null&&a!=undefined&&a.length>0){var d=GetListItem(a,b);if(d!=undefined)c=d;else c=GetNextContainerItem(c,a,f,b)}}}}}catch(o){alert(o)}return c}function GetNextGroup(b){var a=b;if(b=="dropdownGroup2")a="dropdownGroup1";else a="dropdownGroup2";if($("#"+$CityDropDown._containerID+" #"+a+" ul").length==0)a=b;return a}function GetListItem(d,c){var b,a=0;d.find("li").each(function(){var d=$(this);if(d.css("display")!="none"){if(a==c)b=d;a++}});return b}function GetListItemIndex(c){var d=c.index(),b=0,e=c.closest("ul"),a=0;e.find("li").each(function(){var c=$(this);if(c.index()==d)b=a;if(c.css("display")!="none")a++});return b}function FindOrgorDes(){return $("#"+$CityDropDown._containerID+" ul li.city_selected")}function FindOrgorDesAnch(){return $("#"+$CityDropDown._containerID+" ul li.city_selected > a")}